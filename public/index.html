<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./index.css">
  <link rel="stylesheet" href="./bootstrap-5.1.1-dist/css/bootstrap.css">
  <link rel="stylesheet" href="">
  <title>Document</title>
</head>

<body>
  <!--Main Navigation-->
  <header>

    <!-- Sidebar -->
    <nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse">
      <div class="position-sticky">
        <div class="list-group list-group-flush mx-3 mt-4">
          <a href="#" class="list-group-item list-group-item-action py-2 ripple" aria-current="true">
            <i class="fas fa-tachometer-alt fa-fw "></i><span class="log"><img src="./img/ava.png" class="ava" alt="">
              <!-- Button trigger modal -->
              <button class="loginBtn btn text-light" data-bs-toggle="modal" data-bs-target="#staticBackdropOne">Login
              </button>/<button type="button" class="signUpBtn btn text-light" data-bs-toggle="modal"
                data-bs-target="#staticBackdropTwo">SignIn</button></span>
          </a>
          <span class=" musicSec text-light mx-3">Music</span>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple ">
            <i class="fas fa-chart-area fa-fw me-3"></i><span class="icon"><img src="./img/boomIcon.png" alt=""
                srcset="">Home</span>
          </a>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-lock fa-fw me-3"></i><span class="icon"><img src="./img/chart.png" alt="">Charts</span></a>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-chart-line fa-fw me-3"></i><span class="icon"><img src="./img/playlists.png"
                alt="">Playlists</span></a>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple">
            <i class="fas fa-chart-pie fa-fw me-3"></i><span class="icon"><img src="./img/Artist.png" alt=""
                srcset="">Artists</span>
          </a>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple">
            <i class="fas fa-chart-pie fa-fw me-3"></i><span class="icon"><img src="./img/Gen.png" alt=""
                srcset="">Genres</span>
          </a>

          <span class=" musicSec text-light mx-3">Library</span>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple ">
            <i class="fas fa-chart-area fa-fw me-3"></i><span class="icon"><img src="./img/addToPlaylist.png" alt=""
                srcset=""> Add Playlist</span>
          </a>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-lock fa-fw me-3"></i><span class="icon"><img src="./img/favou.png"
                alt="">Favourites</span></a>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-chart-line fa-fw me-3"></i><span class="icon"><img src="./img/Artist.png" alt="">My
              Playlists</span></a>

          <span class=" musicSec text-light mx-3">Buzz</span>

          <a href="#" class="list-group-item list-group-item-action py-2 ripple">
            <i class="fas fa-chart-pie fa-fw me-3"></i><span class="icon"><img src="./img/recc.png" alt=""
                srcset="">Recommended</span>
          </a>
          <span class=" musicSec text-light mx-3">Podcast</span>
          <a href="#" class="list-group-item list-group-item-action py-2 ripple">
            <i class="fas fa-chart-pie fa-fw me-3"></i><span class="icon"><img src="./img/pod.png" alt=""
                srcset="">Recommended</span>
          </a>


        </div>
      </div>
    </nav>
    <!-- Sidebar -->


    <!-- Navbar -->
    <nav id="main-navbar" class="nav_bar_one navbar navbar-expand-lg navbar-light  fixed-top">
      <!-- Container wrapper -->
      <div class="container-fluid">
        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#sidebarMenu"
          aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <i class="fas fa-bars"></i>
        </button>

        <!-- Brand -->
        <a class="navbar-brand" href="#">
          <img src="./img/boom.png" alt="">
        </a>


        <ul class="navbar-nav ms-auto d-flex flex-row">
          <li class="text-light"><input type="text" class=" inp form-control " placeholder="Search"></li>
          <li><img src="./img/playstore.png" alt="" srcset=""></li>
          <li><img src="./img/apple.png" alt="" srcset=""></li>


        </ul>
        </li>


      </div>
      <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
  </header>
  <!--Main Navigation-->

  <!--Main layout-->
  <main style="margin-top: 58px;">
    <div class="main container ">
      <nav class=" nav_two navbar  navbar-light ">
        <div class="container-fluid">
          <ul class="navbar-nav  d-flex flex-row text-light py-3 ">
            <li class="nav_two_list mx-3 text-muted active">All</li>
            <li class=" nav_two_list  mx-3 text-muted active">Trending Songs</li>
            <li class=" nav_two_list  mx-3 text-muted active">New Songs</li>
            <li class=" nav_two_list  mx-3 text-muted  active">Gospel Songs</li>

            <li onclick="upload()" data-bs-toggle="modal" data-bs-target="#staticBackdropOne"
              class=" nav_two_list  mx-3 text-muted  active">Upload</li>
          </ul>
        </div>
      </nav>

      <nav class="audio_Src  navbar">
        <div class="container-fluid">
          <audio src="" controls class="myAudio"></audio>
        </div>
      </nav>

      <div id="carouselExampleInterval" class="carousel slide " data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item  active" data-bs-interval="10000">
            <img src="./img/sunny ade pict.jfif" class="eachImg d-block w-100" alt="...">
          </div>
          <div class="carousel-item" data-bs-interval="2000">
            <img src="./img/mike.jfif" class="eachImg d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="./img/k1.jfif" class="eachImg d-block w-100" alt="...">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval"
          data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval"
          data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>

      </div>

    </div>


    <!-- Modal for log in -->
    <div id="loginFace">

      <div class="modal fade" id="staticBackdropOne" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <!-- <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5> -->
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <span class="logContentModal text-light">Log in</span> <span class=" logBtnSign  mx-4"
                data-bs-toggle="modal" data-bs-target="#staticBackdropTwo">Sign Up</span>
              <p id="errorLog" class="alert alert-danger bg-light text-danger "></p>

              <input type="text" class="inpLog mx-3 my-3 text-light" id="logEmail" placeholder="email">
              <input type="text" class="inpLog mx-3 text-light" id="logPassword" placeholder="password">
              <small class="text-primary mx-3">Forget password?</small>
              <button class="logInBBtn btn btn-primary mx-3 " onclick="logIn()">Login </button>
              <p class="my-5 text-light d-flex justify-content-center">Or</p>
              <div class="allSocial">
                <img src="./img/face1.png" alt="" srcset="" class="social ">
                <img src="./img/twitter.png" alt="" class="social">
                <img src="./img/goo.jfif" alt="" srcset="" onclick="googleSignIN()" class="social">
              </div>

            </div>

          </div>
        </div>
      </div>
    </div>
    <!-- Modal for log in ends here -->


    <!-- Modal for signUP  -->
    <div id="signUpFace">

      <div class="modal fade" id="staticBackdropTwo" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">

              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <span class="logContentModal text-light">Signup</span> <span class=" logBtnSign  mx-4"
                data-bs-toggle="modal" data-bs-target="#staticBackdropOne">LogIn</span>





              <p id="error" class="alert alert-danger bg-light text-danger "></p>
              <input type="text" class="inpLog mx-3 my-3 text-light" id="email" placeholder="email">
              <div class="row">
                <div class="col-12">
                  <div class="row">
                    <div class="col-8">
                      <!-- <input type="text" class="inpLog mx-3 text-light" id="veriCode" placeholder="Verification Code"> -->
                      <div id="veriCode" class="text-light"></div>
                    </div>
                    <div class="col-4 ">
                      <button class="getCodeBtn btn text-light" onclick="getCode()">Get Code </button>

                    </div>

                  </div>

                </div>
              </div>
              <input type="text" class="inpLog_one mx-3 my-3 text-light" id="userName" placeholder="User Name">
              <input type="text" class="inpLog_one mx-3 my-2 text-light" id="password"
                placeholder="Password(6-16 alphanumeric)">
              <input type="text" class="inpLog_one mx-3 my-3 text-light" id="cPassword"
                placeholder="Password(6-16 alphanumeric)">
              <div class="row">
                <div class="col-12">
                  <div class="row">
                    <div class="col-6">
                      <input type="radio" class="mx-4">
                      <label for="" class="text-light">Male</label>

                    </div>
                    <div class="col-6">
                      <input type="radio">
                      <label for="" class="text-light">Female</label>

                    </div>

                  </div>

                </div>

              </div>


              <button class="logInBBtn btn btn-primary mx-3 " onclick="signUp()">Sign Up</button>
              <input type="radio">
              <small class="text-light"> I have read and accept <small class="text-primary">Terms and Condition</small>
              </small>

              <p class="my-3 text-light d-flex justify-content-center">Or</p>

              <div class="allSocial">
                <img src="./img/face1.png" alt="" srcset="" class="social ">
                <img src="./img/twitter.png" alt="" class="social">
                <img src="./img/goo.jfif" alt="" srcset="" class="social">
              </div>


            </div>

          </div>
        </div>
      </div>


    </div>


    <!-- Modal for log in ends here -->

  </main>
  <!--Main layout-->



  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"
    type="module"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"
    type="module"></script>

  <script type="module">
    error.style.display = "none"
    errorLog.style.display = "none"

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-auth.js"
    import { getDatabase, set, ref, onValue } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-database.js"
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyD2j2fNUedfscFYh-rvcg98n2RYdknm44o",
      authDomain: "boomplay-replica.firebaseapp.com",
      databaseURL: "https://boomplay-replica-default-rtdb.firebaseio.com",
      projectId: "boomplay-replica",
      storageBucket: "boomplay-replica.appspot.com",
      messagingSenderId: "798872345728",
      appId: "1:798872345728:web:15d361f1b6163538cb5a65"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth()
    const db = getDatabase()
    const provider = new GoogleAuthProvider()

    let nextValue = 0
    let nextRef = ref(db, "BoomUser")
    let boomArray = []
    onValue(nextRef, ((snapshot) => {
      boomArray = snapshot.val();
      if (boomArray) {
        nextValue = boomArray.length
      } else {
        nextValue = 0
      }
    }))




    let getMyCode = Math.floor(Math.random() * 10000)
    function getCode() {
      console.log(getMyCode);
      veriCode.innerHTML = getMyCode

    }
    window.getCode = getCode;

    function signUp() {
      let mail = email.value;
      let pass = password.value
      if (email.value == "" && userName.value == "" && password.value == "" && cPassword.value == "") {
        error.style.display = "block"
        error.innerText = "Fill up your details"
      } else if (email.value == "" || userName.value == "" || password.value == "" || cPassword.value == "") {
        error.style.display = "block"
        error.innerText = "Fill the missing details"

      } else if (password.value.length < 6) {

        error.style.display = "block"
        error.innerText = "please check your password"
      } else if (password.value !== cPassword.value) {
        error.style.display = "block"
        error.innerText = "Invalid password"

      } else {
        createUserWithEmailAndPassword(auth, mail, pass).then((credentials) => {
          console.log(credentials);
          let dbRef = ref(db, `BoomUser/${nextValue}`)
          let boomObj = {
            email: email.value,
            verificationCode: getMyCode,
            userName: userName.value,
            password: password.value,

          }
          set(dbRef, boomObj)
          error.innerHTML = "<p class='text-dark'>" + `Welcome ${userName.value}. Proceed to LogIn` + "</p>"
          error.style.display = "block"




          // signUpFace.style.display="none"
          // loginFace.style.display="block"

        }).catch((err) => {
          console.log(err);
          error.innerText = "Opps a problem just occur"
          error.style.display = "block"

        })
      }


    }
    window.signUp = signUp;

    function logIn() {
      let getUser = boomArray.find((val) => val.email == logEmail.value && val.password == logPassword.value)
      console.log(getUser);
      if (!getUser) {
        errorLog.innerText = "User does not exist"
        errorLog.style.display = "block"
      } else {
        localStorage.setItem("BoomApp", JSON.stringify(getUser))
        let currentIndex = boomArray.indexOf(getUser)
        localStorage.setItem("currentUser", JSON.stringify(currentIndex))
        location.href = "./dashboard.html"

      }

    }
    window.logIn = logIn;

    function googleSignIN() {
      signInWithPopup(auth, provider).then(result => {
        let credentials = GoogleAuthProvider.credentialFromResult(result);
        console.log(credentials);
        location.href = "./dashboard.html"

      }).catch((err) => {
        errorLog.innerText = "Opps something went wrong "
        errorLog.style.display = "block"


      })



    }
    window.googleSignIN = googleSignIN;






  </script>




</body>

</html>